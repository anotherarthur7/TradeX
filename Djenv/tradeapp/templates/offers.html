{% extends "base.html" %}
{% block content %}
<div class="offer-container">
    <div class="image-container">
        {% if offer.image %}
            <img src="{{ offer.image.url }}" alt="{{ offer.title }}" class="fixed-size-image" />
        {% else %}
            <p>No image available.</p>
        {% endif %}
    </div>
    <div class="details-container">
        <h1>{{ offer.title }}</h1>
        <ul class="offer-details">
            <li><p>DESCRIPTION: {{ offer.description }}</p></li>
            <li><p>COST: ${{ offer.price }}</p></li>
            <li><p>DATE: {{ offer.posted_date }}</p></li>
        </ul>

        <!-- Buttons for Author -->
        {% if is_author %}
            {% if offer.is_open %}
                <form method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Close Offer</button>
                </form>
                <a href="{% url 'edit_offer' offer.id %}" class="btn btn-edit">Edit Offer</a>
            {% endif %}
            <form action="{% url 'delete_offer' offer.id %}" method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this offer?');">Delete Offer</button>
            </form>
        {% endif %}

        <!-- Button for Admin -->
        {% if is_admin and not is_author %}
            <form action="{% url 'delete_offer' offer.id %}" method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this offer?');">Delete Offer</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}